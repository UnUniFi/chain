# Concepts
Stable tokens can be minted with NFT as collateral

# requirement

## basic

## auction system
1. 出品者はbid hookを決めることができる
1. bid hookは入札デポジット額、入札キャンセル額、担保額、落札者決定ロジックに影響する  
  see 10_Generalized_auction_deposit.md

### selling 
1. 所有しているNFTを出品することができる
1. 出品時にbid hookを1...100まで決めることができる(default:x, default is global_option)
1. 出品するにはGUUをステーキングする必要がある(global_option)
1. 入札に使うトークンを選ぶことができる。(global_option)
1. 出品するNFTはロックされる
1. 時間経過で出品が終了する
1. 誰も入札がいない場合は、x回まで自動的で再出品される(global_option)
1. 認証済みのNFTを表示できる
1. NFTを出品するのにはX秒のDelayが入る。(global_option)
1. N個目の出品から手数料が発生する(global_option)
1. 出品時に、最低入札額を決めることができる(min is global_option)
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### selling cancel
1. 誰にも入札されていない場合に、出品者は出品キャンセルすることができる
1. 入札されている場合は、出品キャンセルすることはできない
1. 出品キャンセルは出品後N秒経過後にしか行えない(global_option)
1. 出品キャンセルするとNFTはロック解除され出品者に返却される
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### buy back
1. 出品されているNFTを買い戻すことができる
1. 買い戻す場合は、入札額 * (100 + n)%の金額を支払わなければならない(global_option)
1. 買い戻された最上位入札者は、手数料をもらうことができる
1. 買い戻された2位以下入札者は、手数料をもらうことができない
1. ロックされた入札トークンは全て払い戻される
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### expand auction period
1. 出品者はXトークンを支払い、オークションの期間を延長することができる(global_option)
1. 出品者が支払った手数料は1位2位入札者に50％で等分され支払われる
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### bid
1. 出品されているNFTを入札することができる
1. 入札するトークンはBT基準を満たしていないといけない
1. 最低入札額を上回っていないと入札できない
1. トークンp円分で入札するとd円分がデポジットされる(計算式 $d=\frac{1}{bid hook}\times p$)
1. 自分が最上位入札の場合にさらに高値を更新したい場合は、再度Bidする
1. 高額の入札をしても2位の価格からの刻み入札になる（like ヤフオク
1. 入札が行われる時に、出品残り時間N時間の場合、自動的にn'分出品時間が伸びる(global_option)
1. 入札者とtxのSignが一致していること、それ以外の場合は、受け付けずログを残すこと

### bid cancel
1. 入札をキャンセルすることができる
1. 自分自身しか入札していない場合は、キャンセルすることができない
1. 入札順位がbid hook以下の場合は無料で入札キャンセルできる
1. 入札順位がbid hook以上の場合はデポジット額を支払うことで入札キャンセルできる
1. 入札のキャンセルは入札後X日後にしか行えない(global_option)
1. 入札キャンセル成立後、X日後にトークンの払い出される (global_option)
1. 入札をキャンセルされた出品者は清算が起こる可能性がある
1. 入札者かつtxと入札キャンセル者のSignが一致していること、それ以外の場合は、受け付けずログを残すこと

### end auction
1. 出品者はオークションを終了することができる
1. オークションが終了すると、bid hook位以下のデポジットは返還される
1. オークションが終了すると、bid hook位以上は落札候補者として扱われる
1. 出品者のSign以外の場合は、受け付けずログを残すこと
### pay auction fee
1. 落札候補者はN時間までにデポジット額を引いた入札額を支払う必要がある (global_option)
1. N時間経過後、protocolは最上位入札から順番に落札候補者が入札額を支払ったか確認する
1. 確認時に支払っていない落札候補者のデポジット額は徴収される
1. 落札候補者の支払いが確認できたら、それを落札者とする
1. 落札者よりも下の落札候補者のデポジット額は返還する
1. 落札価格は、徴収デポジット額+入札額となる
1. 落札候補者が全員支払わなかった場合は、徴収デポジット額+NFTを出品者に渡す
1. オークションが成立すると、出品者にトークン、落札者にNFTが引き渡される
1. NFTの引き渡しは落札後X日経過後 (global_option)
1. Tokenの引き渡しは落札後X日経過後 (global_option)
1. 価格情報は記録し、queryで引き出せること
1. 価格情報はNFT,出品者,落札者,落札日時,落札タイプ,入札件数,を累積で記録すること

### bidding reward
1. BTが直接借用資産型の場合に、入札すると(入札者がステーキングしているGUU x 2 or N)を限度額にbGUUを受け取ることができる (global_option)
1. 落札時や入札キャンセル時にbGUUを返却しないとNFTを受け取ることができない
1. 入札キャンセル時にbGUUを返却しないとトークンを受け取ることができない

### borrow
1. 直接借用資産型オークションの場合、出品者は入札されたトークンの50％をprotocolから直接借りることができる
1. 出品者は借りたトークンをprotocolへ戻すことができる
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### CDP
1. 合成資産造成型オークションの場合、出品者は入札額の50%を限度額とし、それ以下の金額でステーブルトークンを発行できる
1. 出品者は発行したステーブルトークンをprotocolへ戻すことができる
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### liquidation
1. CDPで発行したステーブルトークンや借りたトークンはTemporaryTokenとする
1. 入札キャンセルや入札トークン価値が下がり、TemporaryTokenが入札額の50%を上回った場合、清算するかTemporaryTokenを戻して50％以下にしなければ、NFTが入札者に強制的に支払われることになる
1. 清算が発生している時に、N時間までにTemporaryTokenを戻すか、落札を決めないと罰則が発生する (global_option)
1. 罰則は、出品者に対して、トークンが支払われず、それ以外は落札と同じ流れとなる
1. 出品者のSign以外の場合は、受け付けずログを残すこと

### BT(Bidding Token)
1. BTはオークションに使用されるトークン基準
1. BTは2種類あり、オークションタイプや出品者がstableトークンを発行することにより変更になる。
1. 直接借用資産型オークションの場合、BTは、出品者が指定したトークンのみになる。 (global_option)
1. 合成資産造成型オークションの場合、BTは、UnUniFiがサポートする任意のトークンを使用できる (global_option)


## expanded

### incentive system
1. 買い戻し発生時に、NFT作者、外部フロントエンドエンジニア、ecosystemプールにそれぞれN%のインセンティブが発生する (global_option)
1. 落札時に、NFT作者、外部フロントエンドエンジニア、ecosystemプールにそれぞれN%のインセンティブが発生する (global_option)

### valut system
1. 出品したNFTはValutに格納される
1. 入札に使用したトークンはValutに格納される
1. NFTを担保にCDPする場合は、vaultを経由して行う
1. 落札時のNFT払い出しは、vaultを経由して行う
1. 落札時のトークン払い出しは、vaultを経由して行う
1. valutはセキュリティインシデントが起きた時にXによって閉めることができる (global_option)

### saving system
1. voteによって奪われたトークンを取り戻すことができる
1. voteによって奪われたNFTを取り戻すことができる
1. Xの権利でIBCチャンネルを閉じることができる (global_option)
1. Xの権利で特定の入札トークンの利用取り消すことができる (global_option)
1. Xの権利でオークション機能を停止することができる (global_option)


※global_option is defined by genesisjson 