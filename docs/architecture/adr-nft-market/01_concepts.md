# Concepts

stablecoins can be minted with NFT as collateral

# requirement

## basic

## auction system

1. オークションには、通常オークションと late shipping nft オークションがある
1. 通常オークションはプロトコル上で NFT の受け渡しが行われるオークション
1. late shipping nft オークションはプロトコル以外で受け渡すものがあるオークション

### listing

1. 所有している NFT を出品することができる
1. 入札に使うトークンは出品者が BD に基づいて決定する(global_option)
1. 出品する NFT はロックされる
1. 誰も入札がいない場合は、x 日後に出品が終了する(global_option)
1. 認証済みの NFT を表示できる
1. 出品時に、最低貸出金利を決めることができる(min is global_option)
1. 出品時に、通常オークションと late shipping nft オークションのどちらかを選ぶことできる
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### listing cancel

1. 誰にも入札されていない場合に、出品者は出品キャンセルすることができる
1. 入札されている場合は、出品者は出品キャンセル手数料を支払うことで出品キャンセルすることができる
1. 出品キャンセル手数料は入札デポジット額の X％(global_option)
1. 出品キャンセル手数料は、デポジット額割合に応じて入札者全員に分配される
1. 出品キャンセルは出品後 N 秒経過後にしか行えない(global_option)
1. 出品キャンセルすると NFT はロック解除され出品者に返却される
1. ロックされた入札デポジットは全て払い戻される
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### bid

1. 出品されている NFT を入札することができる
1. 入札するトークンは BD 基準を満たしていないといけない
1. 基準を満たしていないと入札できない
   see 10_collateralized_liquidation_deposit_auction.md
1. 入札デポジットは基準を満たしていれば自由に設定できる
1. 入札デポジット貸出金利は自由に設定できる
1. 入札期間は自由に設定できる
1. 入札者は入札時に自動支払い機能を有効にすることができる
1. 入札者と tx の Sign が一致していること、それ以外の場合は、受け付けずログを残すこと

### bid cancel

1. 入札は自由にキャンセルすることができない
1. 入札期間が過ぎた入札のみプロトコルによって自動かつ無料でキャンセルされる。

### SellingDecision

1. 出品者は入札がある時に落札者を決定することができる
1. 落札者は N 時間以内に入札金額 - デポジット金額を支払う必要がある(global_option)
1. 落札者が期限内に支払わない場合、デポジット金額が徴収される
1. 落札者が期限内に支払わない場合、オークションの期間が X 日延長されオークションが再開される(global_option)
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### end auction

1. オークションは SellingDecision か清算で終了する
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### pay auction fee

1. 入札者は N 時間までにデポジット額を引いた入札額を支払う必要がある (global_option)
1. 自動支払いが有効な場合は、残高があれば自動的に支払うことができる
1. N 時間経過後、protocol はデポジット額基準に降順で入札者が入札額を支払ったか確認する
1. 入札者の支払いが確認できたら、それを落札者とする
1. 確認時に支払っていない入札者のデポジット額は徴収される
1. 落札者よりも下の入札者のデポジット額は返還する
1. 出品者に支払われる落札価格は、徴収デポジット額 + (入札額 - デポジット額)となる
1. 入札者が全員支払わなかった場合は、徴収デポジット額+NFT を出品者に渡す
1. オークションが成立すると、出品者にトークン、落札者に NFT が引き渡される
1. NFT の引き渡しは落札後 X 日経過後 (global_option)
1. Token の引き渡しは落札後 X 日経過後 (global_option)
1. オークションが成立した場合、　価格情報を記録し query で引き出せること
1. 価格情報は NFT,出品者,落札者,落札日時,落札タイプ,入札件数,落札金額を累積で記録すること

### late shipping nft

1. late shipping nft オークションは落札者が支払い後、出品者がプロトコル以外の場所で受け渡しを行う
1. 落札者が出品者から受け取り後オークションが終了となる
1. オークション終了後に出品者に Token が支払われる
1. Token の引き渡しは落札後 X 日経過後 (global_option)

### boost staking reward

1. BD が直接借用資産型の場合に、入札すると(入札者がステーキングしている GUU x 2 or N)を限度額にステーキング GUU が増える (global_option)
1. ステーキング GUU が増える期間はオークションが終了するか、入札キャンセルを行うまで

### borrow

1. 直接借用資産型オークションの場合、出品者は入札された bid_active_rank 位以上の総デポジットを限度額とし、protocol から直接借りることができる
1. 出品者は借りたトークンを protocol へ戻すことができる
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### CDP

1. 合成資産造成型オークションの場合、出品者は入札された bid_active_rank 位以上の総デポジットを担保とし、それでステーブルトークンを発行できる
1. 出品者は発行したステーブルトークンを protocol へ戻すことができる
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### liquidation

1. 入札トークン価値が下がり、発行したステーブルトークンの総額が入札額の 50%を上回った場合、清算するかステーブルトークンを戻して 50％以下にしなければ、NFT が入札者に強制的に支払われることになる
1. 清算が発生している時に、N 時間までにステーブルトークンを戻すか、落札を決めないと罰則が発生する (global_option)
1. 罰則は、出品者に対して、トークンが支払われず、それ以外は落札と同じ流れとなる
1. 罰則時に落札候補者全員が支払わない場合に NFT と徴収デポジットはモジュールが持つ
1. 出品者の Sign 以外の場合は、受け付けずログを残すこと

### BD(Bid Denom)

1. BD はオークションに使用されるトークン基準
1. BD は 2 種類あり、オークションタイプや出品者が stable トークンを発行することにより変更になる。
1. 直接借用資産型オークションの場合、BD は、出品者が指定した単一のトークンになる。 (global_option)
1. 合成資産造成型オークションの場合、BD は、UnUniFi がサポートする任意のトークンを使用できる (global_option)

## expanded

### incentive system

1. 買い戻し発生時に、NFT 作者、外部フロントエンドエンジニア、ecosystem プールにそれぞれ N%のインセンティブが発生する (global_option)
1. 落札時に、NFT 作者、外部フロントエンドエンジニア、ecosystem プールにそれぞれ N%のインセンティブが発生する (global_option)

### vault system

1. 出品した NFT は Vault に格納される
1. 入札に使用したトークンは Vault に格納される
1. NFT を担保に CDP する場合は、vault を経由して行う
1. 落札時の NFT 払い出しは、vault を経由して行う
1. 落札時のトークン払い出しは、vault を経由して行う
1. vault はセキュリティインシデントが起きた時に X によって閉めることができる (global_option)

### saving system

1. vote によって奪われたトークンを取り戻すことができる
1. vote によって奪われた NFT を取り戻すことができる
1. X の権利で IBC チャンネルを閉じることができる (global_option)
1. X の権利で特定の入札トークンの利用取り消すことができる (global_option)
1. X の権利でオークション機能を停止することができる (global_option)

※global_option is defined by genesisjson
